# 图片裁剪字段捷径插件

这个字段捷径插件可以将多维表格中的图片按照用户选择的比例进行裁剪，同时保留最大纵向尺寸。

## 功能说明

- 输入：选择一个包含图片的附件字段
- 选择裁剪比例：用户可以选择多种预设比例，包括正方形(1:1)、纵向(9:16)、横向(16:9)、经典(4:3)和宽屏(21:9)
- 输出：生成一个新的附件字段，包含按所选比例裁剪后的图片
- 裁剪方式：保留图片的最大纵向尺寸，按所选比例进行裁剪
- 智能处理：如果原图已经是所选比例，则不进行裁剪，直接使用原图

## 使用方法

1. 在多维表格中添加此字段捷径
2. 在捷径的授权设置中配置图片处理服务的 API Key
3. 选择包含图片的附件字段作为输入
4. 从预设比例中选择一个裁剪比例（默认为9:16）
5. 保存配置后，插件会自动处理图片并输出到新字段

## 开发说明

### 开发环境准备

- Run `npm install` 安装依赖
- Run `npm start` 启动本地服务
- Run `npm run dev` 测试执行函数

### 发布

- Run `npm run pack` 创建 output/output.zip 文件

### 技术实现

由于多维表格字段捷径的运行环境限制，无法直接使用图像处理库（如sharp）。本插件通过调用第三方图像处理服务API来实现图片裁剪功能。

实际部署时，需要替换代码中的图像处理服务URL为你自己的服务地址。

### API Key 说明

本插件使用 APIKey 授权模式，用户需要在捷径的授权设置中配置图片处理服务的 API Key。该 Key 将在请求头部的 Authorization 字段中使用 Bearer 认证方式发送（如：`Authorization: Bearer your_api_key`）。请确保您的图片处理服务支持 Bearer 认证方式。

```
字段捷径是多维表格的一种插件，支持引用已有的字段，进行处理后，输出成一个或多个字段，以实现所需的功能。
本插件实现的需求是：将多维表格的一个储存图片文件的字段中的图片保留最大纵向的方式切割成用户选择的比例（如 1:1、9:16、16:9 等）。
```